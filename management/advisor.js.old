// ============================================================================
// ğŸ§  advisor.js â€” Ã–ÄŸrenciye AkÄ±llÄ± Beceri Ã–neri Motoru (MINI AI SYSTEM)
// Final Stabil SÃ¼rÃ¼m â€” Zihin Platformu v6.3 ile %100 uyumlu
// ============================================================================
// Bu modÃ¼l:
// âœ” BiliÅŸsel bileÅŸen skorlarÄ±nÄ± okur
// âœ” En zayÄ±f beceriyi tespit eder
// âœ” O beceriye gÃ¶re oyun ve geliÅŸim Ã¶nerileri Ã¼retir
// ============================================================================

console.log("ğŸ§© advisor.js yÃ¼klendi (FINAL v6.3)");


// ============================================================================
// ğŸš§ GÃ¼venli SayÄ±sal Okuma
// ============================================================================

function safe(v) {
  return typeof v === "number" && !isNaN(v) ? v : 0;
}


// ============================================================================
// 1) ğŸ” ZayÄ±f Beceri Tespiti
// ============================================================================

function detectWeakSkill(scores) {
  if (!scores) return "bilinmiyor";

  const R = safe(scores.reaction_speed);
  const I = safe(scores.inhibitory_control);
  const S = safe(scores.sustained_attention);

  const minVal = Math.min(R, I, S);

  if (minVal === R) return "reaction_speed";
  if (minVal === I) return "inhibitory_control";
  return "sustained_attention";
}


// ============================================================================
// 2) ğŸ® Beceriye Ã–zel Oyun + GeliÅŸim Ã–nerileri
// ============================================================================

function recommendationFor(skill) {

  switch (skill) {

    case "reaction_speed":
      return {
        beceri: "Tepki HÄ±zÄ±",
        oyun: [
          "HÄ±zlÄ± Renk EÅŸleme",
          "Renkâ€“Kelime AyrÄ±ÅŸtÄ±rma",
          "GÃ¶rsel HÄ±z Tepki OyunlarÄ±"
        ],
        Ã¶neri:
          "Daha hÄ±zlÄ± karar verme ve hÄ±zlÄ± gÃ¶rsel tepki gerektiren aktiviteler tepki hÄ±zÄ±nÄ± gÃ¼Ã§lendirir."
      };

    case "inhibitory_control":
      return {
        beceri: "Ä°nhibisyon (Engel BaskÄ±lama)",
        oyun: [
          "AyÄ±rt Etme Oyunu",
          "YanÄ±ltÄ±cÄ± Renk Engelleme",
          "DoÄŸruâ€“YanlÄ±ÅŸ AyÄ±rma HÄ±z Testleri"
        ],
        Ã¶neri:
          "Acele kararlarÄ± azaltmak ve kontrollÃ¼ davranÄ±ÅŸÄ± artÄ±rmak iÃ§in hataya karÅŸÄ± uyarÄ±cÄ± oyunlar Ã¶nerilir."
      };

    case "sustained_attention":
      return {
        beceri: "Dikkat SÃ¼rekliliÄŸi",
        oyun: [
          "Uzun SÃ¼reli Odak Takip",
          "GÃ¶rselâ€“Ä°ÅŸitsel Seri Takip",
          "SÄ±ra HatÄ±rlama ve Tamamlama"
        ],
        Ã¶neri:
          "OdaklanmayÄ± uzun sÃ¼re sÃ¼rdÃ¼rmeyi gerektiren Ã§alÄ±ÅŸmalar dikkat becerini gÃ¼Ã§lendirir."
      };

    default:
      return {
        beceri: "Bilinmiyor",
        oyun: [],
        Ã¶neri: "Veri bulunamadÄ±."
      };
  }
}


// ============================================================================
// 3) â­ Ana Fonksiyon â€” Ã–ÄŸrenci Ä°Ã§in Ã–neri Ãœretme
// ============================================================================

export function getAdvisorRecommendation(scores) {

  if (!scores) {
    return {
      zayifBeceri: "Bilinmiyor",
      Ã¶neriMetni: "Analiz yapÄ±labilmesi iÃ§in yeterli veri bulunamadÄ±.",
      oyunOneriListesi: []
    };
  }

  const skill = detectWeakSkill(scores);      // zayÄ±f beceri
  const detay = recommendationFor(skill);     // Ã¶neri bilgileri

  const Ã¶neriMetni = `
ğŸ“Œ <strong>GeliÅŸtirmen Gereken Beceri: ${detay.beceri}</strong>

${detay.Ã¶neri}

ğŸ® <strong>Ã–nerilen GeliÅŸim OyunlarÄ±:</strong>
â€¢ ${detay.oyun.join("\nâ€¢ ")}
  `;

  return {
    zayifBeceri: detay.beceri,
    Ã¶neriMetni,
    oyunOneriListesi: detay.oyun
  };
}


// ============================================================================
// 4) ğŸŒ VarsayÄ±lan Export
// ============================================================================

export default {
  getAdvisorRecommendation
};